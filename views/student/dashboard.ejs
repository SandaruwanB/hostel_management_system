<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stay Grid | Home</title>
    <%- include('../components/externalImports') %>
</head>

<body class="min-h-screen">
    <%- include('./components/navbar.ejs') %>
    <div class="ml-0 md:ml-[300px] p-3">
        <h1 class="text-2xl font-bold pl-5 pt-5">Home</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-5 p-5">
            <div class="bg-[rgba(28,51,156,0.4)] border-2 border-[rgb(28,51,156)] rounded grid grid-cols-5">
                <div class="text-left bg-blue-800 col-span-3 flex flex-col justify-center items-center p-5">
                    <svg class="w-12 h-12 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M12 6a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-1.5 8a4 4 0 0 0-4 4 2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 4 4 0 0 0-4-4h-3Zm6.82-3.096a5.51 5.51 0 0 0-2.797-6.293 3.5 3.5 0 1 1 2.796 6.292ZM19.5 18h.5a2 2 0 0 0 2-2 4 4 0 0 0-4-4h-1.1a5.503 5.503 0 0 1-.471.762A5.998 5.998 0 0 1 19.5 18ZM4 7.5a3.5 3.5 0 0 1 5.477-2.889 5.5 5.5 0 0 0-2.796 6.293A3.501 3.501 0 0 1 4 7.5ZM7.1 12H6a4 4 0 0 0-4 4 2 2 0 0 0 2 2h.5a5.998 5.998 0 0 1 3.071-5.238A5.505 5.505 0 0 1 7.1 12Z" clip-rule="evenodd"/>
                    </svg>                      
                    <h1 class="text-md mt-1 text-white">My Hostel status</h1>
                </div>
                <div class="flex justify-center items-center col-span-2">
                    <h2 class="text-3xl text-blue-950 font-semibold"><%= typeof status !== 'undefined' && status ? status : "Cannot found" %></h2>   
                </div> 
            </div>
            <div class="bg-[rgba(28,51,156,0.4)] border-2 border-[rgb(28,51,156)] rounded grid grid-cols-5">
                <div class="text-left bg-blue-800 col-span-3 flex flex-col justify-center items-center p-5">
                    <svg class="w-12 h-12 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M2 7c0-1.10457.89543-2 2-2h16c1.1046 0 2 .89543 2 2v4c0 .5523-.4477 1-1 1s-1-.4477-1-1v-1H4v7h10c.5523 0 1 .4477 1 1s-.4477 1-1 1H4c-1.10457 0-2-.8954-2-2V7Z"/>
                        <path fill="currentColor" d="M5 14c0-.5523.44772-1 1-1h2c.55228 0 1 .4477 1 1s-.44772 1-1 1H6c-.55228 0-1-.4477-1-1Zm5 0c0-.5523.4477-1 1-1h4c.5523 0 1 .4477 1 1s-.4477 1-1 1h-4c-.5523 0-1-.4477-1-1Zm9-1c.5523 0 1 .4477 1 1v1h1c.5523 0 1 .4477 1 1s-.4477 1-1 1h-1v1c0 .5523-.4477 1-1 1s-1-.4477-1-1v-1h-1c-.5523 0-1-.4477-1-1s.4477-1 1-1h1v-1c0-.5523.4477-1 1-1Z"/>
                    </svg>                                          
                    <h1 class="text-md text-white mt-1">Total Payments</h1>
                </div>
                <div class="flex justify-center items-center col-span-2">
                    <h2 class="text-3xl text-blue-950 font-semibold"><%= typeof paidAmount !== 'undefined' && paidAmount ? paidAmount : 0 %></h2>   
                </div> 
            </div>
            <div class="bg-[rgba(28,51,156,0.4)] border-2 border-[rgb(28,51,156)] rounded grid grid-cols-5">
                <div class="text-left bg-blue-800 col-span-3 flex flex-col justify-center items-center p-5">
                    <svg class="w-12 h-12 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M10.915 2.345a2 2 0 0 1 2.17 0l7 4.52A2 2 0 0 1 21 8.544V9.5a1.5 1.5 0 0 1-1.5 1.5H19v6h1a1 1 0 1 1 0 2H4a1 1 0 1 1 0-2h1v-6h-.5A1.5 1.5 0 0 1 3 9.5v-.955a2 2 0 0 1 .915-1.68l7-4.52ZM17 17v-6h-2v6h2Zm-6-6h2v6h-2v-6Zm-2 6v-6H7v6h2Z" clip-rule="evenodd"/>
                        <path d="M2 21a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1Z"/>
                    </svg>                       
                    <h1 class="text-md mt-1 text-white">My Room</h1>
                </div>
                <div class="flex justify-center items-center col-span-2">
                    <h2 class="text-3xl text-blue-950 font-semibold"><%= typeof room !== 'undefined' && room ? room : "Not assigned" %></h2>
                </div> 
            </div>
            <div>
                <% if (typeof status !== 'undefined' && status && status == "In"){ %>
                    <button id="checkOut" class="text-xl text-white font-semibold bg-red-600 px-5 py-2 rounded-md">Check out</button> 
                <% } else { %>
                    <button id="checkIn" class="text-xl text-white font-semibold bg-green-600 px-5 py-2 rounded-md">Check in</button>
                <% } %>
            </div>
        </div>
        <div class="px-5">
            <p class="text-gray-700 mt-5">My recent activities</p>
            <hr class="bg-black h-[2px] mb-5"/>
            <table class="w-full table-auto">
                <thead class="border-2 bg-gray-300 border-gray-300">
                    <th class="text-left p-1">Reason</th>
                    <th class="text-left p-1">In/Out status</th>
                </thead>
                <tbody>
                    <% if (activities.length > 0){ %>
                        <% for (const activity of activities){ %>
                            <tr class="border-b-[2px] border-gray-200">
                                <td class="text-left p-1"><%= activity.reason %></td>
                                <td class="text-left p-1"><%= activity.is_out ? "Out" : "In" %></td>
                            </tr>
                        <% } %>
                    <% } else { %>
                        <tr class="border-b-[2px] border-gray-200">
                            <td class="text-center p-1">No data to show</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>

        <div class="px-5 mt-10">
            <p class="text-gray-700 mt-5">My recent complains</p>
            <hr class="bg-black h-[2px] mb-5"/>
            <table class="w-full table-auto">
                <thead class="border-2 bg-gray-300 border-gray-300">
                    <th class="text-left p-1">Subject</th>
                    <th class="text-left p-1">Message</th>
                </thead>
                <tbody>
                    <% if (complains.length > 0){ %>
                        <% for (const complain of complains){ %>
                            <tr class="border-b-[2px] border-gray-200">
                                <td class="text-center p-1"><%= complain.subject %></td>
                                <td class="text-center p-1"><%= complain.message %></td>
                            </tr>
                        <% } %>
                    <% } else { %>
                        <tr class="border-b-[2px] border-gray-200">
                            <td colspan="2" class="text-center p-1">No complains posted</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>


    <%- include('../components/bottomIncludes.ejs') %>
</body>

</html>